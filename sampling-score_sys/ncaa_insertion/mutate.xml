<ROSETTASCRIPTS>
	<SCOREFXNS>
		<softscore weights="talaris2014_soft" >
			<Reweight scoretype="fa_intra_rep" weight="1.0" />
		</softscore>
		<hardscore weights="talaris2014" >
			<Reweight scoretype="fa_intra_rep" weight="0.2" />
		</hardscore>
	</SCOREFXNS>

	<TASKOPERATIONS>
		<InitializeFromCommandline name="init" />
		<RestrictToRepacking name="repack" />
		<DesignAround name="optshell" resnums=%%resnum%% repack_shell="12.0" allow_design="0" resnums_allow_design="0" />
		<ReadResfile name="mutatable" filename="OBY.resfile" />
		<IncludeCurrent name="current"/>
	</TASKOPERATIONS>

	<FILTERS>
		<ScoreType name="totscore" scorefxn="hardscore" threshold="0" confidence="0" />
        	<DesignableResidues name="print_opt" task_operations=init,current,optshell designable=1 packable=1/>
        	<DesignableResidues name="print_pack" task_operations=init,current,repack designable=1 packable=1/>
	</FILTERS>

	<MOVERS>
		<MinMover name=min_sc bb=0 chi=1 scorefxn=hardscore >
		</MinMover>
		<MinMover name=min_all bb=1 chi=1 scorefxn=hardscore >
		</MinMover>
		<PackRotamersMover name=mutate0 task_operations=mutatable scorefxn=softscore/>
		<PackRotamersMover name=pack_hard task_operations=init,current,repack scorefxn=hardscore/>
		<RotamerTrialsMinMover name=rtmin scorefxn=hardscore task_operations=init,current,optshell nonideal=0/>
		<RigidBodyTransMover name=unbind jump=1 distance=500 x=1 y=1 z=1 />

		<ParsedProtocol name=mutate>
			<Add mover=mutate0 />
			<Add mover=rtmin />
			<Add mover=min_sc />
		</ParsedProtocol>

		<ParsedProtocol name=relax_mono>
			<Add mover=unbind />
			<Add mover=pack_hard />
			<Add mover=min_all />
		</ParsedProtocol>

		<ParsedProtocol name=relax_bind>
			<Add mover=pack_hard />
			<Add mover=min_all />
		</ParsedProtocol>
	</MOVERS>

	<FILTERS>
		<MoveBeforeFilter name=relaxm mover=relax_mono filter=totscore confidence=0/>
		<ReplicateFilter name=monomer filter_name=relaxm replicates=20 lower_cut=0 upper_cut=17 median=0 confidence=1/>
		<MoveBeforeFilter name=relaxb mover=relax_bind filter=totscore confidence=0/>
		<ReplicateFilter name=binding filter_name=relaxb replicates=20 lower_cut=0 upper_cut=17 median=0 confidence=1/>
	</FILTERS>

	<MOVERS>
		<If name=wrapper_mono filter_name=monomer true_mover_name=null false_mover_name=null />
		<If name=wrapper_bind filter_name=binding true_mover_name=null false_mover_name=null />
	</MOVERS>

	<PROTOCOLS>
		Add mover=docking_tree />
		<Add mover=mutate />
    	<Add mover=wrapper_mono />
    	<Add mover=wrapper_bind />
		Add mover=relax_bind />
		Add filter=print_opt />
		Add filter=print_pack />
	</PROTOCOLS>

	<OUTPUT scorefxn=hardscore />
</ROSETTASCRIPTS>

